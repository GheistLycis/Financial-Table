<div class="main-container">  
  <app-filters [year]="activeYear" (filters)="listExpenses($event)"></app-filters>
  
  <div class="mt-3 table-container">
    <ul 
      ngbNav 
      #nav="ngbNav" 
      [activeId]="activeYear"
      (navChange)="activeYear = $event.nextId; loading = true"
      class="nav-tabs"
    >
      <li 
        *ngFor="let year of years"
        [ngbNavItem]="year.id"
        [destroyOnHide]="true"
      >
        <button ngbNavLink>{{ year.year }}</button>
        <ng-template ngbNavContent>
          <table class="table table-striped">
            <thead>
              <th>Valor</th>
              <th>Descrição</th>
              <th>Data</th>
              <th>Grupo</th>
            </thead>
            <tbody *ngIf="!loading else loadingSpinner">
              <tr *ngFor="let expense of expenses">
                <td>{{ expense.value }}</td>
                <td>{{ expense.description }}</td>
                <td>{{ expense.date }}</td>
                <td>{{ expense.group.name }}</td>
              </tr>
            </tbody>
            <ng-template #loadingSpinner>
              <span class="spinner-border spinner-border-sm "></span>
            </ng-template> 
          </table>
        </ng-template>
      </li>
    </ul>
    <div [ngbNavOutlet]="nav"></div>
  </div>
</div>
